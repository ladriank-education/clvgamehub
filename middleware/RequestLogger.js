const logger = (request, response, next) => {const start = Date.now(); const ip = request.headers['x-forwarded-for'] || request.connection.remoteAddress; const method = request.method; const url = request.url; response.on('finish', () => {const end = Date.now(); const statusCode = response.statusCode; const today = new Date(); var day = today.getDate(); var month = today.getMonth()+1; const year = today.getFullYear(); var hours = today.getHours(); var minutes = today.getMinutes(); var seconds = today.getSeconds(); day = (day < 10) ? `0${day}` : day; month = (month < 10) ? `0${month}` : month; hours = (hours < 9) ? `0${hours}` : hours; minutes = (minutes < 9) ? `0${minutes}` : minutes; seconds = (seconds < 9) ? `0${seconds}` : seconds; const responseTime = end - start; console.log(`[${day}/${month}/${year} - ${hours}:${minutes}:${seconds}] "${method} ${url}" ${statusCode} .......... time elapsed: ${responseTime}ms`); }); next(); }; module.exports = logger;